<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Siri咔咔</title>
  
  <subtitle>学而时习之</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://wfwblog.cn/"/>
  <updated>2018-02-28T09:55:10.885Z</updated>
  <id>http://wfwblog.cn/</id>
  
  <author>
    <name>siri-kk</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Jenkins+Github持续集成</title>
    <link href="http://wfwblog.cn/2018/02/28/Jenkins-Github%E6%8C%81%E7%BB%AD%E9%9B%86%E6%88%90/"/>
    <id>http://wfwblog.cn/2018/02/28/Jenkins-Github持续集成/</id>
    <published>2018-02-28T06:05:37.000Z</published>
    <updated>2018-02-28T09:55:10.885Z</updated>
    
    <content type="html"><![CDATA[<p>##J enkins安装</p><ol><li>安装java环境<code>yum install java</code></li><li>下载Jenkins：<code>wget http://mirrors.jenkins.io/war-stable/latest/jenkins.war</code>并修改权限<code>chmod +x jenkins.war</code></li><li><p>编写启动脚本<code>jenkins_start.sh</code></p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">NAME=&quot;jenkins.war&quot;</span><br><span class="line">echo $NAME</span><br><span class="line">ID=`ps -ef | grep &quot;$NAME&quot; | grep -v &quot;grep&quot; | awk &apos;&#123;print $2&#125;&apos;`</span><br><span class="line">echo $ID</span><br><span class="line">echo &quot;---------------&quot;</span><br><span class="line">for id in $ID</span><br><span class="line">do</span><br><span class="line">kill -9 $id</span><br><span class="line">echo &quot;killed $id&quot;</span><br><span class="line">done</span><br><span class="line">echo &quot;---------------&quot;</span><br><span class="line">nohup java -jar jenkins.war --httpPort=8008 &amp;</span><br></pre></td></tr></table></figure><p> 添加启动权限：<code>chmod +x jenkins_start.sh</code></p></li><li><p>开启8008端口</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">firewall-cmd --zone=public --add-port=8008/tcp --permanent</span><br><span class="line">firewall-cmd --reload</span><br></pre></td></tr></table></figure></li><li><p>设置成开机启动</p><ul><li>修改<code>/etc/rc.d/rc.local</code>文件，添加启动脚本的目录</li><li><code>chmod +x /etc/rc.d/rc.local</code></li></ul></li></ol><h2 id="集成GitHub"><a href="#集成GitHub" class="headerlink" title="集成GitHub"></a>集成GitHub</h2><h3 id="安装GitHub插件"><a href="#安装GitHub插件" class="headerlink" title="安装GitHub插件"></a>安装GitHub插件</h3><p>系统管理-&gt;管理插件-&gt;可选插件，过滤条件“github plugin”，选中“github plugin”，直接安装。可能已经安装过了</p><h3 id="配置GitHub插件"><a href="#配置GitHub插件" class="headerlink" title="配置GitHub插件"></a>配置GitHub插件</h3><p>系统管理-&gt;系统设置-&gt;GitHub-&gt;Add GitHub Server</p><ol><li>Github中生成<code>access token</code><br>Settings &gt;&gt; Developer settings &gt;&gt; Personal access tokens<br>需要勾选的scopes：<code>repo</code>和<code>admin:repo_hook</code></li><li>添加Credentials<br><img src="/2018/02/28/Jenkins-Github持续集成/addCredentials.png" alt="addCredentials.png"><br>kind选择<code>Secret text</code>，并填写Secret<br><img src="/2018/02/28/Jenkins-Github持续集成/token.png" alt="token"></li><li>使用<code>Test connection</code>测试<br><img src="/2018/02/28/Jenkins-Github持续集成/test.png" alt="test.png"><h3 id="创建一个自由风格任务"><a href="#创建一个自由风格任务" class="headerlink" title="创建一个自由风格任务"></a>创建一个自由风格任务</h3></li><li>创建新任务，选择自由风格的任务</li><li>选择GitHub project，填写Project url</li><li>源码管理，选择Git，Add Credentials（使用GitHub的用户名和密码），选择<code>githubweb</code>源码浏览器，并填写项目url<h3 id="构建触发器"><a href="#构建触发器" class="headerlink" title="构建触发器"></a>构建触发器</h3>勾选<code>GitHub hook trigger for GITScm polling</code><h3 id="配置GitHub仓库的Webhooks"><a href="#配置GitHub仓库的Webhooks" class="headerlink" title="配置GitHub仓库的Webhooks"></a>配置GitHub仓库的Webhooks</h3>进入要监控的仓库，Settings &gt;&gt; Webhooks，<code>Add webhook</code></li></ol><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ol><li><a href="https://wiki.jenkins.io/display/JENKINS/Github%20Plugin" target="_blank" rel="noopener">Github Plugin</a></li><li><a href="https://www.jianshu.com/p/b2ed4d23a3a9" target="_blank" rel="noopener">Jenkins+Github持续集成</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;##J enkins安装&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装java环境&lt;code&gt;yum install java&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;下载Jenkins：&lt;code&gt;wget http://mirrors.jenkins.io/war-stable/latest
      
    
    </summary>
    
      <category term="CI" scheme="http://wfwblog.cn/categories/CI/"/>
    
    
      <category term="Jenkins" scheme="http://wfwblog.cn/tags/Jenkins/"/>
    
      <category term="Github" scheme="http://wfwblog.cn/tags/Github/"/>
    
  </entry>
  
  <entry>
    <title>Nginx安装与配置</title>
    <link href="http://wfwblog.cn/2018/02/26/Nginx%E5%AE%89%E8%A3%85%E4%B8%8E%E9%85%8D%E7%BD%AE/"/>
    <id>http://wfwblog.cn/2018/02/26/Nginx安装与配置/</id>
    <published>2018-02-26T07:27:44.000Z</published>
    <updated>2018-02-28T03:52:59.502Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Nginx是一个Http服务器，与传统的服务器不同，Nginx不依赖多线程处理请求，它采用高扩展性的事件驱动型的架构，性能好，稳定，配置简单且资源消耗小。本文介绍nginx的安装与配置。</p></blockquote><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>安装环境：CentOS7</p><ol><li><p>安装Nginx仓库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install epel-release</span><br></pre></td></tr></table></figure></li><li><p>安装Nginx</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo yum install nginx</span><br></pre></td></tr></table></figure></li><li><p>启动Nginx</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start nginx</span><br><span class="line">systemctl status nginx</span><br></pre></td></tr></table></figure><p> 注意nginx默认使用80端口启动，如果启动失败，可以查看80端口是否被占用，如果占用，则杀死进程</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">netstat -lnp | grep 80</span><br><span class="line">ps pid</span><br><span class="line">kill pid</span><br></pre></td></tr></table></figure><p> 其中pid为进程id</p></li><li><p>如果有防火墙，需要运行如下命令运行http和https访问</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=http </span><br><span class="line">sudo firewall-cmd --permanent --zone=public --add-service=https</span><br><span class="line">sudo firewall-cmd --reload</span><br></pre></td></tr></table></figure></li><li><p>验证</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://server_domain_name_or_IP/</span><br></pre></td></tr></table></figure><p> <img src="/2018/02/26/Nginx安装与配置/nginxtest.png" alt="nginxtest.png"></p></li><li><p>配置成开机启动</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable nginx</span><br></pre></td></tr></table></figure></li><li><p>重新加载配置</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -s reload</span><br></pre></td></tr></table></figure></li></ol><h2 id="Nginx介绍"><a href="#Nginx介绍" class="headerlink" title="Nginx介绍"></a>Nginx介绍</h2><p>Nginx有一个主进程（master process）和很多工作进程（worker processes）。主进程用来读取配置并维护工作进程，工作进程处理请求。</p><h2 id="Nginx配置介绍"><a href="#Nginx配置介绍" class="headerlink" title="Nginx配置介绍"></a>Nginx配置介绍</h2><h3 id="配置文件的结构及指令介绍"><a href="#配置文件的结构及指令介绍" class="headerlink" title="配置文件的结构及指令介绍"></a>配置文件的结构及指令介绍</h3><p>Nginx有各种模块组成，而模块则由配置文件中的各种指令（directives）控制。<code>Directives</code>又分为<code>simple directives</code>和<code>block directives</code>。<br><code>simple directive</code>结构如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">name parameter;</span><br></pre></td></tr></table></figure></p><p><code>block directive</code>结构与<code>simple directive</code>类似，不过不是以<code>;</code>结尾，而是以<code>{}</code>结尾，例如：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">location /documents/ &#123;</span><br><span class="line">    [ configuration C ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>如果<code>{}</code>中有其他<code>directives</code>，我们称之为<code>context</code>。<br><code>#</code>后面为注释</p><ul><li><p><strong>location——根据request URI设置配置</strong></p>  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">语法:location [ = | ~ | ~* | ^~ ] uri &#123; ... &#125;</span><br><span class="line">location @name &#123; ... &#125;</span><br><span class="line">默认值:—</span><br><span class="line">Context:server, location</span><br></pre></td></tr></table></figure><ul><li><code>~*</code>（大小写不敏感 ）或<code>~</code>（大小写敏感）——正则匹配</li><li><code>^~</code>或无修饰——前缀匹配</li><li><p><code>=</code>——精确匹配<br>匹配过程：首先进行精确匹配，匹配到此停止；然后使用uri进行前缀匹配，匹配出最长的的location，并记录，假设为location_prefix_longest，如果前缀匹配用<code>^~</code>修饰，则匹配到此停止；再然后进行正则匹配检查，假设匹配到的第一个location为location_reg_first，则使用location_reg_first中的配置，如果没有匹配到，则使用location_prefix_longest中的配置。<br>举例说明：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">location = / &#123;</span><br><span class="line">    [ configuration A ]</span><br><span class="line">&#125;</span><br><span class="line">location / &#123;</span><br><span class="line">    [ configuration B ]</span><br><span class="line">&#125;</span><br><span class="line">location /documents/ &#123;</span><br><span class="line">    [ configuration C ]</span><br><span class="line">&#125;</span><br><span class="line">location ^~ /images/ &#123;</span><br><span class="line">    [ configuration D ]</span><br><span class="line">&#125;</span><br><span class="line">location ~* \.(gif|jpg|jpeg)$ &#123;</span><br><span class="line">    [ configuration E ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>/</code>请求匹配configuration A，<code>/index.html</code>匹配configuration B，在<code>/documents/document.html</code>匹配configuration C，<code>/images/1.gif</code>匹配configuration D，<code>/documents/1.jpg</code>匹配configuration E。<br><code>@</code>定义了一个命名location，它用于请求重定向。不能嵌套且不能包含嵌套locations。</p></li></ul></li></ul><h3 id="默认服务器根目录"><a href="#默认服务器根目录" class="headerlink" title="默认服务器根目录"></a>默认服务器根目录</h3><p>默认服务器根目录为<code>/usr/share/nginx/html</code>，我们在安装nginx步骤进行验证时看到的页面所相关的文件就放置在该目录下，默认服务的配置文件为<code>/etc/nginx/nginx.conf.default</code></p><h3 id="Nginx全局配置文件"><a href="#Nginx全局配置文件" class="headerlink" title="Nginx全局配置文件"></a>Nginx全局配置文件</h3><p>Nginx的全局配置文件为<code>/etc/nginx/nginx.conf</code>，注意它的内容中有一条包含配置<code>include /etc/nginx/conf.d/*.conf;</code>，表明它将<code>/etc/nginx/conf.d</code>目录下所有以<code>.conf</code>结尾的配置文件包含进来，实现配置的扩展。</p><h3 id="在-etc-nginx-conf-d-中添加配置"><a href="#在-etc-nginx-conf-d-中添加配置" class="headerlink" title="在/etc/nginx/conf.d/中添加配置"></a>在/etc/nginx/conf.d/中添加配置</h3><ol><li><p><a href="https://www.nginx.com/resources/wiki/start/topics/depth/ifisevil/" target="_blank" rel="noopener">避免使用if指令</a><br> if指令是为rewrite模块设计的（location模块中只有rewrite或return），其他应用不推荐使用。例如：</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">if ($request_method = POST ) &#123;</span><br><span class="line">  return 405;</span><br><span class="line">&#125;</span><br><span class="line">if ($args ~ post=140)&#123;</span><br><span class="line">  rewrite ^ http://example.com/ permanent;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> 使用<code>try_files</code>判断文件是否存在。</p></li><li><p>访问静态内容</p><ul><li>创建目录/data/nginx_www，并添加index.html文件，创建/data/nginx_image，并添加图片<br>songhuiqiao.jpeg</li><li><p><code>cd /etc/nginx/conf.d</code>并创建配置文件<code>static_content.conf</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">    server &#123;</span><br><span class="line">    listen 8001;</span><br><span class="line">    server_name static_content;</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root /data/nginx_www;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    location /nginx_images/ &#123;</span><br><span class="line">        root /data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>重新加载nginx配置<code>nginx -s reload</code></p></li><li>开放8001端口<code>firewall-cmd --zone=public --add-port=8001/tcp --permanent</code></li><li>重启防火墙<code>systemctl restart firewalld</code></li><li>访问<code>http://ip:8001/</code>和<code>http://ip:8001/nginx_images/songhuiqiao.jpeg</code>，则分别访问的是<code>/data/nginx_www/index.html</code>静态文件和<code>/data/nginx_images/songhuiqiao.jpeg</code>静态文件</li></ul></li><li><p>配置为代理服务器<br> Nginx收到请求后，将请求转发给被代理的服务器，获取到响应之后返给客户端。</p><ul><li>创建目录/data/nginx_proxied，并添加index.html文件</li><li><p><code>cd /etc/nginx/conf.d</code>并修改配置文件<code>static_content.conf</code>为</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    server &#123;</span><br><span class="line">    listen 8001;</span><br><span class="line">    server_name static_content;</span><br><span class="line">    root /usr/share/nginx/html;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        root /data/nginx_www;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /nginx_images/ &#123;</span><br><span class="line">        root /data;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /nginx_proxied/ &#123;</span><br><span class="line">        proxy_pass http://localhost:8002;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>即对uri前缀为<code>/nginx_proxied/</code>的请求做代理，被代理地址为<code>http://localhost:8002</code></p></li><li><p>配置被代理服务<br><code>cd /etc/nginx/conf.d</code>并创建配置文件<code>proxied_server.conf</code>：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen 8002;</span><br><span class="line">    root /data/nginx_proxied;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    location /nginx_proxied/ &#123;</span><br><span class="line">        root /data;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>重新加载nginx配置文件<code>nginx -s reload</code></p></li><li>访问<code>http:ip:8001/nginx_proxied/</code></li></ul></li></ol><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><ol><li><a href="https://www.digitalocean.com/community/tutorials/how-to-install-nginx-on-centos-7" target="_blank" rel="noopener">how-to-install-nginx-on-centos-7</a></li><li><a href="https://www.nginx.com/resources/wiki/start/#pre-canned-configurations" target="_blank" rel="noopener">Pre-canned Configurations</a></li><li><a href="http://nginx.org/en/docs/beginners_guide.html" target="_blank" rel="noopener">Nginx Beginners’ Guide</a></li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;Nginx是一个Http服务器，与传统的服务器不同，Nginx不依赖多线程处理请求，它采用高扩展性的事件驱动型的架构，性能好，稳定，配置简单且资源消耗小。本文介绍nginx的安装与配置。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;安装&quot;&gt;
      
    
    </summary>
    
      <category term="服务器" scheme="http://wfwblog.cn/categories/%E6%9C%8D%E5%8A%A1%E5%99%A8/"/>
    
    
      <category term="nginx" scheme="http://wfwblog.cn/tags/nginx/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+Github搭建自己的博客（三）</title>
    <link href="http://wfwblog.cn/2018/02/24/Hexo-Github%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%89%EF%BC%89/"/>
    <id>http://wfwblog.cn/2018/02/24/Hexo-Github搭建自己的博客（三）/</id>
    <published>2018-02-24T09:35:42.000Z</published>
    <updated>2018-02-26T01:56:30.211Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>本地搭建好hexo系统后，我们可以将其部署到GitHub上，使用Github Pages访问我们的博客。</p></blockquote><h3 id="部署到GitHub"><a href="#部署到GitHub" class="headerlink" title="部署到GitHub"></a>部署到GitHub</h3><ol><li>创建repository<br>在GitHub中New一个repository，注意仓库的名称需要跟我们的GitHub用户名一致（GitHub Pages要求）</li><li>为仓库增加deploy key，否则发布过程会出现发布失败<ul><li>生成本地ssh key，<a href="http://blog.csdn.net/keyboardota/article/details/7603630" target="_blank" rel="noopener">方法</a></li><li>拷贝.ssh/id_rsa.pub文件内的所有内容，进入repository，点击settings，点击Deploy keys，将拷贝的内容Add deploy key</li></ul></li><li>修改站点配置文件<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:yourname/yourname.github.io.git</span><br><span class="line">  branch: master</span><br></pre></td></tr></table></figure></li></ol><p>repo也可以配置为https的形式，但是我在发布过程中总是提示我版本不对，因此改用ssh发布</p><ol><li><p>安装发布插件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git  --save</span><br></pre></td></tr></table></figure></li><li><p>发布</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure></li><li><p>测试<br>访问<a href="https://yourname.github.io/" target="_blank" rel="noopener">https://yourname.github.io/</a></p></li></ol><h3 id="定制域名"><a href="#定制域名" class="headerlink" title="定制域名"></a>定制域名</h3><p>如果我们想自己申请域名作为自己的博客地址，可以使用GitHub Pages的Custom domain功能。</p><ol><li>申请域名<br>我是在腾讯云上申请的，然后需要配置我们域名的解析<br><img src="/2018/02/24/Hexo-Github搭建自己的博客（三）/dns.png" alt="dns"><br>注意记录类型选择CNAME，记录值填写仓库名称即可，表明是域名绑定域名</li><li>配置GitHub Pages<br>进入repository的Settings，找到GitHub Pages，并配置custom domain<br><img src="/2018/02/24/Hexo-Github搭建自己的博客（三）/githubpages.png" alt="githubpages.png"><br>点击Save后，在Code中会增加CNAME文件，内容即为我们的自定义域名。</li><li>hexo中增加CNAME文件<br>由于每次Deploy后CNAME文件都会被删掉，因此需要在站点目录下的source中新增CNAME文件，内容为自定义域名<br><img src="/2018/02/24/Hexo-Github搭建自己的博客（三）/cname.png" alt="cname.png"></li><li>测试<br>访问自定义域名</li></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;本地搭建好hexo系统后，我们可以将其部署到GitHub上，使用Github Pages访问我们的博客。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;部署到GitHub&quot;&gt;&lt;a href=&quot;#部署到GitHub&quot; class=&quot;header
      
    
    </summary>
    
      <category term="工具" scheme="http://wfwblog.cn/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Hexo" scheme="http://wfwblog.cn/tags/Hexo/"/>
    
      <category term="Next" scheme="http://wfwblog.cn/tags/Next/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+Github搭建自己的博客（二）</title>
    <link href="http://wfwblog.cn/2018/02/23/Hexo-Github%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%BA%8C%EF%BC%89/"/>
    <id>http://wfwblog.cn/2018/02/23/Hexo-Github搭建自己的博客（二）/</id>
    <published>2018-02-23T10:26:04.000Z</published>
    <updated>2018-02-26T01:45:07.039Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>Hexo支持各种主题风格，默认使用Landscape主题，本章我们介绍如何使用Next主题美化我们的博客</p></blockquote><p>在Hexo中有两份主要的配置文件，其名称都是_config.yml。 其中，一份位于站点根目录下，主要包含Hexo本身的配置；另一份位于主题目录下，这份配置由主题作者提供，主要用于配置主题相关的选项。<br>为了描述方便，在以下说明中，将前者称为<strong>站点配置文件</strong>， 后者称为<strong>主题配置文件</strong>。</p><a id="more"></a><h2 id="更换theme"><a href="#更换theme" class="headerlink" title="更换theme"></a>更换theme</h2><ol><li>下载Next主题<br>Hexo官网可以下载<a href="https://hexo.io/themes/" target="_blank" rel="noopener">各种主题</a>，从中找到<a href="https://github.com/theme-next/hexo-theme-next" target="_blank" rel="noopener">Next主题的地址</a>，直接下载zip</li><li>配置主题<br>将下载的zip文件解压至Hexo/blog/themes下，重命名为hexo-theme-next。</li><li><p>使用主题<br>打开站点配置文件，修改theme配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">theme: hexo-theme-next</span><br></pre></td></tr></table></figure></li><li><p>验证主题<br>Git Bash命令界面下，执行如下命令：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo server -p 4001</span><br></pre></td></tr></table></figure></li></ol><p>浏览器中访问<a href="http://localhost:4001" target="_blank" rel="noopener">http://localhost:4001</a><br>出现如下界面则更换主题成功<br><img src="/2018/02/23/Hexo-Github搭建自己的博客（二）/hexohelloworld.png" alt="hexohelloworld"></p><h2 id="主题设定"><a href="#主题设定" class="headerlink" title="主题设定"></a>主题设定</h2><p>Next主题主要通过修改主题配置文件和站点配置文件设定自己的博客。</p><h3 id="选择scheme"><a href="#选择scheme" class="headerlink" title="选择scheme"></a>选择scheme</h3><p>修改主题配置文件，检索Scheme Settings<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scheme: Pisces</span><br></pre></td></tr></table></figure></p><h3 id="设置博客language"><a href="#设置博客language" class="headerlink" title="设置博客language"></a>设置博客language</h3><p>修改站点配置文件，检索language<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">language: zh-CN</span><br></pre></td></tr></table></figure></p><h3 id="设置博客菜单项"><a href="#设置博客菜单项" class="headerlink" title="设置博客菜单项"></a>设置博客菜单项</h3><p>修改主题配置文件，检索Menu Settings<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  categories: /categories/ || th</span><br><span class="line">  tags: /tags/ || tags</span><br><span class="line">  archives: /archives/ || archive</span><br></pre></td></tr></table></figure></p><p>菜单内容的设置格式是：item name: link || icon name，我只保留了主页，分类，标签，归档。搜索菜单会通过集成第三方服务实现。<br>需要注意的是，添加categories和tags页面之前，这两个按钮都是无效的，后续会有介绍。</p><h3 id="设置侧栏"><a href="#设置侧栏" class="headerlink" title="设置侧栏"></a>设置侧栏</h3><p>修改主题配置文件，检索position<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sidebar:</span><br><span class="line">  position: left</span><br><span class="line">  display: post</span><br><span class="line">  offset: 12</span><br><span class="line">  b2t: false</span><br><span class="line">  scrollpercent: false</span><br><span class="line">  onmobile: false</span><br></pre></td></tr></table></figure></p><p>我配置的居左显示，在文章页面（拥有目录列表）时显示</p><h3 id="设置头像"><a href="#设置头像" class="headerlink" title="设置头像"></a>设置头像</h3><p>将头像放置主题目录下的source/uploads/ （目录若不存在则新建uploads）<br>修改主题配置文件，搜索Sidebar Avatar<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">avatar: /uploads/pic.jpg</span><br></pre></td></tr></table></figure></p><h2 id="主题配置"><a href="#主题配置" class="headerlink" title="主题配置"></a>主题配置</h2><p>NexT坚持将复杂的细节隐藏，提供尽量少并且简便的设置，保持最大限度的易用性。</p><h3 id="设置RSS"><a href="#设置RSS" class="headerlink" title="设置RSS"></a>设置RSS</h3><ol><li><p>安装hexo-generator-feed<br>Git Bash下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure></li><li><p>修改主题配置文件，检索rss</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">rss:</span><br><span class="line">feed:</span><br><span class="line">  type: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  limit: 20</span><br><span class="line">  hub:</span><br><span class="line">  content:</span><br><span class="line">  content_limit: 140</span><br><span class="line">  content_limit_delim: &apos; &apos;</span><br></pre></td></tr></table></figure></li></ol><h3 id="添加标签页面"><a href="#添加标签页面" class="headerlink" title="添加标签页面"></a>添加标签页面</h3><p>只有添加了标签页面，侧栏中我们配置的「标签」菜单才能点击并响应</p><ol><li><p>站点目录下（即blog目录），Git Bash中</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page tags</span><br></pre></td></tr></table></figure><p> 则会在source/tags中新建index.md</p></li><li><p>设置页面类型<br> 修改步骤1创建中的index.md</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: 标签</span><br><span class="line">date: 2018-02-22 22:18:27</span><br><span class="line">type: &quot;tags&quot;</span><br><span class="line">comments: false</span><br></pre></td></tr></table></figure><p> 其中<code>comments: false</code>是去掉标签页面的评论服务（如果集成了评论服务）</p></li><li>文章中的头部添加tags <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">title: Hexo+Github搭建自己的博客（二）</span><br><span class="line">date: 2018-02-23 18:26:04</span><br><span class="line">tags:</span><br><span class="line">  - Hexo</span><br><span class="line">  - Next</span><br></pre></td></tr></table></figure></li></ol><h3 id="添加分类页面"><a href="#添加分类页面" class="headerlink" title="添加分类页面"></a>添加分类页面</h3><p>类似于添加标签页面</p><ol><li><p>站点目录下（即blog目录），Git Bash中</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure><p> 则会在source/categories中新建index.md</p></li><li><p>设置页面类型<br> 修改步骤1创建中的index.md</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">title: 分类</span><br><span class="line">date: 2018-02-22 22:37:03</span><br><span class="line">type: &quot;categories&quot;</span><br><span class="line">comments: false</span><br></pre></td></tr></table></figure><p> 其中<code>comments: false</code>是去掉分类页面的评论服务（如果集成了评论服务）</p></li><li>文章中的头部添加categories <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">title: Hexo+Github搭建自己的博客（二）</span><br><span class="line">date: 2018-02-23 18:26:04</span><br><span class="line">tags:</span><br><span class="line">  - Hexo</span><br><span class="line">  - Next</span><br><span class="line">categories: 工具</span><br></pre></td></tr></table></figure></li></ol><h3 id="设置字体"><a href="#设置字体" class="headerlink" title="设置字体"></a>设置字体</h3><p>包括：全局字体，标题字体，文章字体，Logo字体和代码字体<br>修改主题配置文件，检索Font Settings<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">font:</span><br><span class="line">  enable: true</span><br><span class="line"></span><br><span class="line">  # 外链字体库地址，例如 //fonts.googleapis.com (默认值)</span><br><span class="line">  # 预览：https://fonts.google.com/</span><br><span class="line">  host:</span><br><span class="line"></span><br><span class="line">  # 全局字体，应用在 body 元素上</span><br><span class="line">  global:</span><br><span class="line">    external: true</span><br><span class="line">    family: Lato</span><br><span class="line">    size: 14</span><br><span class="line"></span><br><span class="line">  # 标题字体 (h1, h2, h3, h4, h5, h6)</span><br><span class="line">  headings:</span><br><span class="line">    external: true</span><br><span class="line">    family: Roboto Slab</span><br><span class="line"></span><br><span class="line">  # 文章字体</span><br><span class="line">  posts:</span><br><span class="line">    external: true</span><br><span class="line">    family: Microsoft YaHei</span><br><span class="line">    size: 14</span><br><span class="line"></span><br><span class="line">  # Logo 字体</span><br><span class="line">  logo:</span><br><span class="line">    external: true</span><br><span class="line">    family: Lobster Two</span><br><span class="line">    size: 24</span><br><span class="line"></span><br><span class="line">  # 代码字体，应用于 code 以及代码块</span><br><span class="line">  codes:</span><br><span class="line">    external: true</span><br><span class="line">    family: Monospaced</span><br><span class="line">    size: 13</span><br></pre></td></tr></table></figure></p><p>这是我的字体配置，<a href="https://fonts.google.com/" target="_blank" rel="noopener">更多字体</a></p><h3 id="侧边栏设置社交链接"><a href="#侧边栏设置社交链接" class="headerlink" title="侧边栏设置社交链接"></a>侧边栏设置社交链接</h3><p>修改主题配置文件，检索social<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">social:</span><br><span class="line">  GitHub: https://github.com/yourname || github</span><br><span class="line">  E-Mail: mailto:youremail || envelope</span><br></pre></td></tr></table></figure></p><h3 id="开启打赏功能"><a href="#开启打赏功能" class="headerlink" title="开启打赏功能"></a>开启打赏功能</h3><p>修改主题配置文件，检索reward_comment<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">reward_comment: 多谢支持，共同进步！</span><br><span class="line">wechatpay: /uploads/微信打赏.jpg</span><br><span class="line">alipay: /uploads/支付宝打赏.jpg</span><br></pre></td></tr></table></figure></p><h3 id="添加友情链接"><a href="#添加友情链接" class="headerlink" title="添加友情链接"></a>添加友情链接</h3><p>修改主题配置文件，检索links_title<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">links_icon: link</span><br><span class="line">links_title: 友情链接</span><br><span class="line">links_layout: inline</span><br><span class="line">links:</span><br><span class="line">  酷壳: https://coolshell.cn/</span><br><span class="line">  SegmentFault: https://segmentfault.com/</span><br><span class="line">  DigitalOcean: https://www.digitalocean.com/community</span><br><span class="line">  伯乐在线: http://python.jobbole.com/</span><br></pre></td></tr></table></figure></p><h3 id="设置「阅读全文」"><a href="#设置「阅读全文」" class="headerlink" title="设置「阅读全文」"></a>设置「阅读全文」</h3><p>首页显示一篇文章的部分内容，并提供一个链接跳转到全文页面。有三种方法：</p><ol><li>在文章中使用 <code>&lt;!-- more --&gt;</code>手动进行截断</li><li>在文章的 front-matter 中添加 description，并提供文章摘录</li><li>自动形成摘要<br>在出题配置文件中，检索auto_excerpt<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">auto_excerpt:</span><br><span class="line">  enable: true</span><br><span class="line">  length: 150</span><br></pre></td></tr></table></figure></li></ol><h2 id="第三方服务集成"><a href="#第三方服务集成" class="headerlink" title="第三方服务集成"></a>第三方服务集成</h2><h3 id="评论系统"><a href="#评论系统" class="headerlink" title="评论系统"></a>评论系统</h3><p>基于来必力的免费city版本搭建。</p><ol><li>首先登录<a href="https://livere.com" target="_blank" rel="noopener">来必力官网</a>，在管理页面获取来必力的City版，获取安装代码，从自己的安装代码中获得data-uid，如图：<br><img src="/2018/02/23/Hexo-Github搭建自己的博客（二）/uid.png" alt="uid"></li><li>修改主题配置文件，检索livere_uid<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">livere_uid: your_uid</span><br></pre></td></tr></table></figure></li></ol><p>另外还可以<a href="https://imsun.net/posts/gitment-introduction/" target="_blank" rel="noopener">基于Gitment搭建评论系统</a>，不过我在搭建过程中初始化评论页面的时候遇到“Error: Validation Failed”，没解决因此放弃了。。</p><h3 id="百度统计"><a href="#百度统计" class="headerlink" title="百度统计"></a>百度统计</h3><ol><li>注册登录<a href="https://tongji.baidu.com" target="_blank" rel="noopener">百度统计</a></li><li>添加网站：将自己的博客地址添加到自有网站中，点击左侧栏“代码获取”，获取下图中标识的统计id<br><img src="/2018/02/23/Hexo-Github搭建自己的博客（二）/tongjiid.png" alt="tongjiid.png"></li><li>修改主题配置文件，检索baidu_analytics<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">baidu_analytics: your_baidu_id</span><br></pre></td></tr></table></figure></li></ol><h3 id="阅读次数统计（后面有更简单方式）"><a href="#阅读次数统计（后面有更简单方式）" class="headerlink" title="阅读次数统计（后面有更简单方式）"></a>阅读次数统计（后面有更简单方式）</h3><ol><li>注册登录<a href="https://leancloud.cn" target="_blank" rel="noopener">LeanCloud</a>，创建应用，点击应用，创建Class，Class名称为Counter，选择无限制</li><li>设置中，点击“应用Key”，获取AppId，AppKey</li><li>修改主题配置文件，检索leancloud_visitors<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">leancloud_visitors:</span><br><span class="line">  enable: true</span><br><span class="line">  app_id: your_app_id</span><br><span class="line">  app_key: your_app_key</span><br></pre></td></tr></table></figure></li></ol><h3 id="搜索服务"><a href="#搜索服务" class="headerlink" title="搜索服务"></a>搜索服务</h3><ol><li><p>安装检索插件，站点根目录下Git Bash执行命令</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-searchdb --save</span><br></pre></td></tr></table></figure></li><li><p>修改站点配置文件<br>添加如下配置</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">  path: search.xml</span><br><span class="line">  field: post</span><br><span class="line">  format: html</span><br><span class="line">  limit: 10000</span><br></pre></td></tr></table></figure></li><li><p>修改主题配置文件，启用本地搜索</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">local_search:</span><br><span class="line">  enable: true</span><br></pre></td></tr></table></figure></li></ol><h2 id="其他个性化配置"><a href="#其他个性化配置" class="headerlink" title="其他个性化配置"></a>其他个性化配置</h2><h3 id="修改文章底部带-的标签"><a href="#修改文章底部带-的标签" class="headerlink" title="修改文章底部带#的标签"></a>修改文章底部带#的标签</h3><p>修改模板<code>/themes/hexo-theme-next/layout/_macro/post.swig</code>，搜索<code>rel=&quot;tag&quot;&gt;#</code>，将 <code>#</code>换成<code>&lt;i class=&quot;fa fa-tag&quot;&gt;&lt;/i&gt;</code></p><h3 id="在每篇文章末尾统一添加“本文结束”标记"><a href="#在每篇文章末尾统一添加“本文结束”标记" class="headerlink" title="在每篇文章末尾统一添加“本文结束”标记"></a>在每篇文章末尾统一添加“本文结束”标记</h3><ol><li><p><code>/themes/hexo-theme-next/layout/_macro/</code>目录下新建<code>page-end-tag.swig</code>文件，内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &#123;% if not is_index %&#125;</span><br><span class="line">        &lt;div style=&quot;text-align:center;color: #ccc;font-size:14px;&quot;&gt;-------------本文结束&lt;i class=&quot;fa fa-paw&quot;&gt;&lt;/i&gt;感谢您的阅读-------------&lt;/div&gt;</span><br><span class="line">    &#123;% endif %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure></li><li><p>编辑<code>/themes/hexo-theme-next/layout/_macro/post.swig</code>文件，搜索<code>END POST BODY</code>，在其后面添加如下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if theme.page_end_tag.enabled and not is_index %&#125;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">&#123;% include &apos;page-end-tag.swig&apos; %&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></li><li><p>编辑主题配置文件，添加内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">page_end_tag:</span><br><span class="line">  enabled: true</span><br></pre></td></tr></table></figure></li></ol><h3 id="网站底部添加访问量和博客阅读次数统计"><a href="#网站底部添加访问量和博客阅读次数统计" class="headerlink" title="网站底部添加访问量和博客阅读次数统计"></a>网站底部添加访问量和博客阅读次数统计</h3><p>编辑主题配置文件，检索busuanzi_count<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">busuanzi_count:</span><br><span class="line">  enable: true</span><br><span class="line">  total_visitors: true</span><br><span class="line">  total_visitors_icon: user</span><br><span class="line">  total_views: true</span><br><span class="line">  total_views_icon: eye</span><br><span class="line">  post_views: true</span><br><span class="line">  post_views_icon: eye</span><br></pre></td></tr></table></figure></p><h3 id="在文章底部增加版权信息"><a href="#在文章底部增加版权信息" class="headerlink" title="在文章底部增加版权信息"></a>在文章底部增加版权信息</h3><h4 id="方法一"><a href="#方法一" class="headerlink" title="方法一"></a>方法一</h4><p>修改主题配置文件，检索post_copyright<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">post_copyright:</span><br><span class="line">  enable: true</span><br><span class="line">  license: &lt;a href=&quot;https://creativecommons.org/licenses/by-nc-sa/4.0/&quot; rel=&quot;external nofollow&quot; target=&quot;_blank&quot;&gt;CC BY-NC-SA 4.0&lt;/a&gt;</span><br></pre></td></tr></table></figure></p><h4 id="方法二——自定义"><a href="#方法二——自定义" class="headerlink" title="方法二——自定义"></a>方法二——自定义</h4><ol><li><p><code>/themes/hexo-theme-next/layout/_macro/</code>目录下新建<code>my-copyright.swig</code>文件，内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if page.copyright %&#125;</span><br><span class="line">&lt;div class=&quot;my_post_copyright&quot;&gt;</span><br><span class="line">  &lt;script src=&quot;//cdn.bootcss.com/clipboard.js/1.5.10/clipboard.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  </span><br><span class="line">  &lt;!-- JS库 sweetalert 可修改路径 --&gt;</span><br><span class="line">  &lt;script src=&quot;https://cdn.bootcss.com/jquery/2.0.0/jquery.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;script src=&quot;https://unpkg.com/sweetalert/dist/sweetalert.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;本文标题:&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot;&gt;&#123;&#123; page.title &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;文章作者:&lt;/span&gt;&lt;a href=&quot;/&quot; title=&quot;访问 &#123;&#123; theme.author &#125;&#125; 的个人博客&quot;&gt;&#123;&#123; theme.author &#125;&#125;&lt;/a&gt;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;发布时间:&lt;/span&gt;&#123;&#123; page.date.format(&quot;YYYY年MM月DD日 - HH:MM&quot;) &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;最后更新:&lt;/span&gt;&#123;&#123; page.updated.format(&quot;YYYY年MM月DD日 - HH:MM&quot;) &#125;&#125;&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;原始链接:&lt;/span&gt;&lt;a href=&quot;&#123;&#123; url_for(page.path) &#125;&#125;&quot; title=&quot;&#123;&#123; page.title &#125;&#125;&quot;&gt;&#123;&#123; page.permalink &#125;&#125;&lt;/a&gt;</span><br><span class="line">    &lt;span class=&quot;copy-path&quot;  title=&quot;点击复制文章链接&quot;&gt;&lt;i class=&quot;fa fa-clipboard&quot; data-clipboard-text=&quot;&#123;&#123; page.permalink &#125;&#125;&quot;  aria-label=&quot;复制成功！&quot;&gt;&lt;/i&gt;&lt;/span&gt;</span><br><span class="line">  &lt;/p&gt;</span><br><span class="line">  &lt;p&gt;&lt;span&gt;许可协议:&lt;/span&gt;&lt;i class=&quot;fa fa-creative-commons&quot;&gt;&lt;/i&gt; &lt;a rel=&quot;license&quot; href=&quot;https://creativecommons.org/licenses/by-nc-nd/4.0/&quot; target=&quot;_blank&quot; title=&quot;Attribution-NonCommercial-NoDerivatives 4.0 International (CC BY-NC-ND 4.0)&quot;&gt;署名-非商业性使用-禁止演绎 4.0 国际&lt;/a&gt; 转载请保留原文链接及作者。&lt;/p&gt;  </span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt; </span><br><span class="line">    var clipboard = new Clipboard(&apos;.fa-clipboard&apos;);</span><br><span class="line">    $(&quot;.fa-clipboard&quot;).click(function()&#123;</span><br><span class="line">      clipboard.on(&apos;success&apos;, function()&#123;</span><br><span class="line">        swal(&#123;   </span><br><span class="line">          title: &quot;&quot;,   </span><br><span class="line">          text: &apos;复制成功&apos;,</span><br><span class="line">          icon: &quot;success&quot;, </span><br><span class="line">          showConfirmButton: true</span><br><span class="line">          &#125;);</span><br><span class="line">&#125;);</span><br><span class="line">    &#125;);  </span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></li><li><p>在目录<code>/themes/hexo-theme-next/source/css/_common/components/post/</code>下添加<code>my-post-copyright.styl</code>，内容为：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">.my_post_copyright &#123;</span><br><span class="line">  width: 85%;</span><br><span class="line">  max-width: 45em;</span><br><span class="line">  margin: 2.8em auto 0;</span><br><span class="line">  padding: 0.5em 1.0em;</span><br><span class="line">  border: 1px solid #d3d3d3;</span><br><span class="line">  font-size: 0.93rem;</span><br><span class="line">  line-height: 1.6em;</span><br><span class="line">  word-break: break-all;</span><br><span class="line">  background: rgba(255,255,255,0.4);</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright p&#123;margin:0;&#125;</span><br><span class="line">.my_post_copyright span &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  width: 5.2em;</span><br><span class="line">  color: #b5b5b5;</span><br><span class="line">  font-weight: bold;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .raw &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  width: 5em;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright a &#123;</span><br><span class="line">  color: #808080;</span><br><span class="line">  border-bottom:0;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright a:hover &#123;</span><br><span class="line">  color: #a3d2a3;</span><br><span class="line">  text-decoration: underline;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright:hover .fa-clipboard &#123;</span><br><span class="line">  color: #000;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .post-url:hover &#123;</span><br><span class="line">  font-weight: normal;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .copy-path &#123;</span><br><span class="line">  margin-left: 1em;</span><br><span class="line">  width: 1em;</span><br><span class="line">  +mobile()&#123;display:none;&#125;</span><br><span class="line">&#125;</span><br><span class="line">.my_post_copyright .copy-path:hover &#123;</span><br><span class="line">  color: #808080;</span><br><span class="line">  cursor: pointer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li><li><p>编辑<code>/themes/hexo-theme-next/layout/_macro/post.swig</code>文件，搜索<code>END POST BODY</code>，在其后面（如果已经添加了文章结束标志则在其后）添加如下内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if not is_index %&#125;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">&#123;% include &apos;my-copyright.swig&apos; %&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure></li><li><p>编辑<code>/themes/hexo-theme-next/source/css/_common/components/post/post.styl</code>文件，在最后一行添加代码：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@import &quot;my-post-copyright&quot;</span><br></pre></td></tr></table></figure></li><li><p>修改站点配置文件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">url: http://wfwblog.cn</span><br></pre></td></tr></table></figure></li><li><p>在文章头部添加copyright</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">title: Hexo+Github搭建自己的博客（二）</span><br><span class="line">date: 2018-02-23 18:26:04</span><br><span class="line">tags:</span><br><span class="line">  - Hexo  </span><br><span class="line">  - Next</span><br><span class="line">categories: 工具</span><br><span class="line">copyright: true</span><br></pre></td></tr></table></figure></li></ol><h2 id="参考文章"><a href="#参考文章" class="headerlink" title="参考文章"></a>参考文章</h2><p><a href="http://theme-next.iissnan.com/getting-started.html" target="_blank" rel="noopener">Next主题使用介绍</a><br><a href="http://shenzekun.cn/hexo%E7%9A%84next%E4%B8%BB%E9%A2%98%E4%B8%AA%E6%80%A7%E5%8C%96%E9%85%8D%E7%BD%AE%E6%95%99%E7%A8%8B.html" target="_blank" rel="noopener">Next主题个性化配置教程</a></p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;Hexo支持各种主题风格，默认使用Landscape主题，本章我们介绍如何使用Next主题美化我们的博客&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;在Hexo中有两份主要的配置文件，其名称都是_config.yml。 其中，一份位于站点根目录下，主要包含Hexo本身的配置；另一份位于主题目录下，这份配置由主题作者提供，主要用于配置主题相关的选项。&lt;br&gt;为了描述方便，在以下说明中，将前者称为&lt;strong&gt;站点配置文件&lt;/strong&gt;， 后者称为&lt;strong&gt;主题配置文件&lt;/strong&gt;。&lt;/p&gt;
    
    </summary>
    
      <category term="工具" scheme="http://wfwblog.cn/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Hexo" scheme="http://wfwblog.cn/tags/Hexo/"/>
    
      <category term="Next" scheme="http://wfwblog.cn/tags/Next/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+Github搭建自己的博客（一）</title>
    <link href="http://wfwblog.cn/2018/02/23/Hexo-Github%E6%90%AD%E5%BB%BA%E8%87%AA%E5%B7%B1%E7%9A%84%E5%8D%9A%E5%AE%A2%EF%BC%88%E4%B8%80%EF%BC%89/"/>
    <id>http://wfwblog.cn/2018/02/23/Hexo-Github搭建自己的博客（一）/</id>
    <published>2018-02-23T07:41:49.000Z</published>
    <updated>2018-02-26T01:56:18.714Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>在查阅资料时，我发现有些人的博客风格简洁而清晰，很喜欢，因此学习基于Hexo+GitHub搭建了一套自己的博客系统，记录如下</p></blockquote><h2 id="环境准备"><a href="#环境准备" class="headerlink" title="环境准备"></a>环境准备</h2><p>主要完成以下工作：</p><ul><li>安装Git</li><li>安装node.js</li><li>安装Hexo</li></ul><h3 id="安装Git"><a href="#安装Git" class="headerlink" title="安装Git"></a>安装Git</h3><ol><li><a href="https://github.com/git-for-windows/git/tags" target="_blank" rel="noopener">下载Git</a><br>我使用的v1.9.5，网上说高版本会有问题，未验证</li><li>安装<br>注意在步骤2中，选择配置Git环境变量的选项，即：Use Git from the Windows Command Prompt</li><li>验证<br>在cmd下，执行命令<code>git --version</code></li></ol><h3 id="安装node-js"><a href="#安装node-js" class="headerlink" title="安装node.js"></a>安装node.js</h3><ol><li><a href="https://nodejs.org/en/download/" target="_blank" rel="noopener">下载node.js</a><br>我使用的v6.3.1</li><li>安装</li><li>验证<br>在cmd下，执行命令<code>node -v</code></li></ol><h3 id="安装Hexo"><a href="#安装Hexo" class="headerlink" title="安装Hexo"></a>安装Hexo</h3><p>使用npm命令安装</p><ol><li>新建Hexo文件夹，进入Hexo，任意位置点击鼠标右键，选择Git Bash（已经安装Git），步骤2和步骤3命令均在Git bash中执行</li><li>使用淘宝npm镜像：<code>npm install -g cnpm --registry=https://registry.npm.taobao.org</code>（需要等待一段时间）</li><li>安装hexo：<code>cnpm install -g hexo-cli</code></li><li>验证：cmd下，执行命令<code>hexo -v</code></li></ol><h2 id="运行Hexo"><a href="#运行Hexo" class="headerlink" title="运行Hexo"></a>运行Hexo</h2><p>Git Bash命令界面中，执行命令<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">hexo init blog</span><br><span class="line">cd blog</span><br><span class="line">cnpm install</span><br><span class="line">hexo server -p 4001</span><br></pre></td></tr></table></figure></p><p>注意：hexo默认使用4000端口，但是如果4000端口被占用，则会一直没有响应，因此在启动的时候我指定hexo使用4001端口</p><p>浏览器中输入<a href="http://localhost:4001" target="_blank" rel="noopener">http://localhost:4001</a><br>看到如下页面表明你已经成功了<br><img src="/2018/02/23/Hexo-Github搭建自己的博客（一）/helloworldblog.png" alt="helloworld"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;blockquote&gt;
&lt;p&gt;在查阅资料时，我发现有些人的博客风格简洁而清晰，很喜欢，因此学习基于Hexo+GitHub搭建了一套自己的博客系统，记录如下&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;环境准备&quot;&gt;&lt;a href=&quot;#环境准备&quot; class=&quot;header
      
    
    </summary>
    
      <category term="工具" scheme="http://wfwblog.cn/categories/%E5%B7%A5%E5%85%B7/"/>
    
    
      <category term="Hexo" scheme="http://wfwblog.cn/tags/Hexo/"/>
    
  </entry>
  
</feed>
